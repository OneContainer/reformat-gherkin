language: python
dist: xenial
python:
  - "3.6"
  - "3.7"
env:
  global:
    - secure: AaLOyW4l/ryzd3X3mLoOorg48KzD0uODLVglU36a8bQNEqQKMDl8ExVcEcyzGTcM77Ap3777Y+Mu4czjlft2VqOpR9J9cPI2XpKlZ01RfNdUWD0jPy0m0PnVVguf7D541JAgwym9SO1LNF0cX5dpitMMN+6YZguXrm4mP3tY79cVAkK4uF8W91kYGEGNVIdWC8iTZxzBMzJYj9fVHIRYUZ6w720kwjg5HYVcQgswbeKKptO1Xs036frjRk1b6NBnmd+xnxT3C7SGzYFNCEqzYL4QEzqLKTehkbYxUp4hai+1NUa5vgqVgSPL15BgyL+mDsvO0zcOSjoOR91rPgEEWaZj+/VJxiX5hVozhT2oktKx9uGIwHMAJmXgTKOmyKylYY4Vhmk7g2jVswDhFgW0sRrNVo3ho458gwOz+Lw4hmxMabYVR8Y18NR7baaGWwTeG5kgBmswsf0a1f65kJIxpxkwoMi2taG/F0RYUljKZ8YQtlitsn9wW0no8RAT/EHzfgpaIlsPKhIsGAVBFk9IOR0W9dAdJrGHlo8pnUW3ZTa0TfhYLM8FG2THyo/uz3YgXbNo5RO6bFHMH6q7gkwwDmj2eN27iMTq4D1WvhtKcDQ2fj6WOkvLNu1VcA/fbdNEg3I4dNQQld502f9HjypS6HkyQzPqS+Epp8HTKZpa5jk=
    - secure: PFJREiG3zmpVxALKprDri8IjMLUSAWu28Zvabyq+z65KJFTkzk7lgjMuPuVRwqHG7dS3Q4TmAJswDguT+wr84N1q9Er/Ymb5FYyUCxxkwRkG87rrzjbSZKKYVXOTi0PpbTFWpNvd8zycKqcowIIrdoG4skL7iOmbIglj6f/6hDtnSscEDXWYhkPrHcXKrLoqehaX237L0rlpTBRJrOJ74VBwAGMOh3esTlZiBvmTxMqF7Guw+KXR1F2wL4+UU31zIjDx5JZyk6vqdDyj0D+uJDA+MKKXXo7YUuIeU67KLAdi7Yg9/SY0wjqytubxZgXvN6ifmZotK+SSDiZqsrIZmPAGmOrQJfbrTpQ1fBBa2uf9tToF8Dnj8pqC6DL5WSapIUs6DN4/b0kq2G5USIr3XXv/SVfTysrgdo0eb2K58JTp9z3tCY43RCQHJkcWV3WszlCAL5z3si8K6s8qsSasL/fu3cGLz5pNPcS8ayuiRFQydZvZsuScDhOoJJ8ZqQQ9kINZWkfnPB02LWUH2uhkI6ZK4oiHlTB1x0EJSzNY9HgDJVxdCg63JoCOLyP876LRcknTf4pqKLjEhewz8Nh9tNkduE7VF2JPY+Iv4pNOg7SyuS2lgwmFuJ11fhAIIPklyhJe6JPQhmbHfVyc9FdlOM7l0O6ZzXe9AI8atG+nro8=
install:
  - pip install poetry
  - poetry install
  - pip install flake8 coveralls
script:
  - flake8
  - pytest --cov=reformat_gherkin/
after_success:
  - coveralls
before_deploy:
  - poetry config http-basic.pypi $PYPI_USER $MYPYPI_PASSWORD
  - poetry build
deploy:
  provider: script
  script: poetry publish
  skip_cleanup: true
  on:
    branch: master
